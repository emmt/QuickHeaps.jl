<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · Efficient and versatile binary heaps and priority queues for Julia</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Efficient and versatile binary heaps and priority queues for Julia</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../install/">Installation</a></li><li><a class="tocitem" href="../binaryheaps/">Binary heaps</a></li><li><a class="tocitem" href="../priorityqueues/">Priority queues</a></li><li><a class="tocitem" href="../nodes/">Nodes types</a></li><li class="is-active"><a class="tocitem" href>-</a><ul class="internal"><li><a class="tocitem" href="#Customize-ordering"><span>Customize ordering</span></a></li></ul></li><li><a class="tocitem" href="../library/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/emmt/QuickHeaps.jl/blob/master/docs/src/customize.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Customize-ordering"><a class="docs-heading-anchor" href="#Customize-ordering">Customize ordering</a><a id="Customize-ordering-1"></a><a class="docs-heading-anchor-permalink" href="#Customize-ordering" title="Permalink"></a></h2><p>If the ordering rules provided by <code>QuickHeaps</code> are not suitable for your needs, you may customize how to order the values in binary heaps of in priority queues. For maximal flexibility, you may also customize how nodes (not values) are ordered in priority queues. This is possible because sorting of values and nodes in <code>QuickHeaps</code> calls <code>QuickHeaps.lt(o::SomeOrder, x::T, y::T)</code> to decide whether <code>x &lt; y</code> holds according to <code>o</code>. For priority queues, <code>x</code> and <code>y</code> are the nodes stored by the priority queue and the default behavior is to compare the node values. For values (in binary heaps or in priority queues), the default is that <code>QuickHeaps.lt</code> calls <code>Base.Order.lt</code>. These rules are implemented by the following few lines in <code>QuickHeaps</code>:</p><pre><code class="language-julia hljs">QuickHeaps.lt(o::Base.Order.Ordering, x::T, y::T) where {T&lt;:QuickHeaps.AbstractNode} =
    QuickHeaps.lt(o, QuickHeaps.get_val(x), QuickHeaps.get_val(y))

QuickHeaps.lt(o::Base.Order.Ordering, x::T, y::T) where {T} =
    Base.Order.lt(o, x, y)</code></pre><p>In the methods implemented by the <code>QuickHeaps</code> package, calls to <code>Base.Order.lt</code> and <code>QuickHeaps.lt</code> are always for elements of the same type. Hence the restriction that <code>x</code> and <code>y</code> are both of the same type <code>T</code> above. This is something to remember when customizing the behavior of <code>QuickHeaps.lt</code>.</p><h3 id="Customize-ordering-of-values"><a class="docs-heading-anchor" href="#Customize-ordering-of-values">Customize ordering of values</a><a id="Customize-ordering-of-values-1"></a><a class="docs-heading-anchor-permalink" href="#Customize-ordering-of-values" title="Permalink"></a></h3><p>For binary heaps and priority queues with values of type <code>ValType</code>, you may create your own ordering type, say <code>MyOrder</code>, inheriting from <code>Base.Order.Ordering</code> and specialize <code>Base.Order.lt(o::MyOrder, x::ValType, y::ValType)</code> to yield whether <code>x &lt; y</code> according to <code>o</code> and for <em>values</em> <code>x</code> and <code>y</code>. Typically:</p><pre><code class="language-julia hljs">struct MyOrder &lt;: Base.Order.Ordering end
Base.Order.lt(o::MyOrder, x::ValType, y::ValType) = ... # true or false</code></pre><p>If you do not want to specialize <code>Base.Order.lt</code>, you may replace this function by <code>QuickHeaps.lt</code>.</p><p>As an example, let us customize the ordering of floating-point values so that <code>NaN</code> are considered as the largest possible values:</p><pre><code class="language-julia hljs">struct FloatMin &lt;: Base.Order.Ordering end
Base.Order.lt(o::FloatMin, x::T, y::T) where {T&lt;:AbstractFloat} =
    (! isnan(x)) &amp; (isnan(y) | (x &lt; y))</code></pre><p>The result of <code>Base.Order.lt(FloatMin(), x, y)</code> is the same as <code>isless(x, y)</code> but the above implementation of <code>Base.Order.lt</code> is faster than <code>isless</code> because it uses non-branching bitwise operators instead of logical ones (then, parentheses are needed owing to the precedence rules of bitwise operators). This is an example of the benefits of customizing the ordering of values. Since this amounts to specializing <code>Base.Order.lt</code>, the same optimization is applicable to other sorting algorithms in Julia.</p><h3 id="Customize-ordering-of-nodes"><a class="docs-heading-anchor" href="#Customize-ordering-of-nodes">Customize ordering of nodes</a><a id="Customize-ordering-of-nodes-1"></a><a class="docs-heading-anchor-permalink" href="#Customize-ordering-of-nodes" title="Permalink"></a></h3><p>As an additional flexibility, for priority queues with nodes of type <code>NodeType</code> and ordering of type <code>OrderType</code>, you may also specialize <code>QuickHeaps.lt(o::OrderType, x::NodeType, y::NodeType)</code> to order the nodes with a specific rule that may account for the keys of the nodes (not just their values). However to avoid <a href="https://docs.julialang.org/en/v1/manual/style-guide/#Avoid-type-piracy">type-piracy</a>, at least one of <code>NodeType</code> or <code>OrderType</code> must be foreign to <code>QuickHeaps</code>.</p><p>If you opt on customizing on the ordering type and do not use a specific node type, you must write something like:</p><pre><code class="language-julia hljs">struct MyOrder &lt;: Base.Order.Ordering end # custom ordering type
function QuickHeaps.lt(o::MyOrder, x::T, y::T) where {T&lt;:QuickHeaps.Node}
    # Below, `QuickHeaps.get_key` and/or `QuickHeaps.get_val` may be called to retrieve
    # the key or value of nodes `x` and `y`.
    true_or_false = ...
    return true_or_false
end</code></pre><p>The restriction <code>T &lt;: QuickHeaps.Node</code> above is because, by default in <code>QuickHeaps</code>, priority queues store their nodes as instances of <code>QuickHeaps.Node{K,V}</code>. As noted in the above comment <a href="../library/#QuickHeaps.get_key"><code>QuickHeaps.get_key</code></a> and/or <a href="../library/#QuickHeaps.get_val"><code>QuickHeaps.get_val</code></a> may be called to retrieve # the key or value of nodes <code>x</code> and <code>y</code>.</p><p>If you opt for using your own node type, you may or not use an existing ordering type but you must implement a new node type following the guidelines in the <a href="#Nodes_types"><em>Node types</em> section of the manual</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../nodes/">« Nodes types</a><a class="docs-footer-nextpage" href="../library/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Wednesday 3 September 2025 12:23">Wednesday 3 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
